#!/bin/bash
if [[ "$1" == "-w" ]]; then
    wallpaper="$2"
else
    wallpaper=$(sxiv ~/wall -taqfo)
fi

if test $wallpaper -z
then
	echo "No selection - skipping..."
else
	
	#swww img $wallpaper --transition-type grow --transition-pos 0.854,0.977 --transition-step 90 --transition-fps 144
	wal -qi $wallpaper
	hyprctl reload
	ln -sf "$wallpaper" "$HOME/.cache/current_wal"
	pkill waybar && hyprctl dispatch exec waybar
	pkill swaync && hyprctl dispatch exec swaync
	#pkill sysvol && hyprctl dispatch exec "~/.config/hypr/scripts/sysvol -p left -o v -m \"0 0 0 10\""
	#notify-send "wall updated"
	wal-telegram -w &
	#pywal-discord
	#pkill nwg-dock-hyprland && hyprctl dispatch exec nwg-dock-hyprland 
fi

